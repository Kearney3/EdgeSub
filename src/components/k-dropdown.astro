---
import { Icon } from "astro-icon/components";

export type DropdownItemPrototype = { key: string; value: string };

interface Props {
    Items: DropdownItemPrototype[];
    Default?: DropdownItemPrototype;
}
const {
    Items,
    Default = {
        key: "还未选择",
        value: "__NULL__",
    },
} = Astro.props;
---

<k-dropdown class="dropdown" data-selected-value={Default.value}>
    <div tabindex="0" role="button" class="btn m-1">
        <span>{Default.key}</span>
        <Icon name="iconoir:arrow-down-tag" />
    </div>

    <ul
        tabindex="0"
        class="dropdown-content menu bg-base-100 rounded-box z-1 w-52 p-2 shadow-sm max-h-64 overflow-y-auto"
    >
        {
            Items.map((i) => {
                const isSeparator = i.key.startsWith('---') && i.key.endsWith('---');
                return (
                    <li>
                        {isSeparator ? (
                            <span class="menu-title text-base-content/70 font-semibold px-2 py-1">{i.key.slice(3, -3)}</span>
                        ) : (
                            <a data-value={i.value}>{i.key}</a>
                        )}
                    </li>
                );
            })
        }
    </ul>
</k-dropdown>

<script src="@scripts/components/k-dropdown"></script>

<style>
    .dropdown-content::-webkit-scrollbar {
        width: 6px;
    }

    .dropdown-content::-webkit-scrollbar-track {
        background: transparent;
    }

    .dropdown-content::-webkit-scrollbar-thumb {
        background: rgba(156, 163, 175, 0.5);
        border-radius: 3px;
    }

    .dropdown-content::-webkit-scrollbar-thumb:hover {
        background: rgba(156, 163, 175, 0.7);
    }

    .dropdown-content {
        scrollbar-width: thin;
        scrollbar-color: rgba(156, 163, 175, 0.5) transparent;
    }
</style>
